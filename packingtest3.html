<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>test</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <!-- D3 -->
    <script type="text/javascript" src="https://d3js.org/d3.v7.min.js"></script>
    <!-- Custom CSS -->
    <style>
    </style>


    <body>
      <script type="text/javascript">

    let data_as_text = d3.text("https://angelalm97.github.io/finalbigdata/test5.csv");
    d3.csvParseRows(data_as_text);
console.log();

    const table = html`<table></table>`;
    let tableObject = d3.select(table);

    tableObject.append("tr")
        .selectAll("th")
        .data(data_as_array[0])
        .enter()
        .append("th")
        .text(d => d);

      tableObject.selectAll("tr")
       .data(data_as_array.slice(1, 15))
       .enter()
       .append("tr")
       .selectAll("td")
       .data(d => d)
       .enter()
       .append("td")
       .text(d => d)
       ;


data_as_json = d3.csv("https://angelalm97.github.io/finalbigdata/test5.csv");
console.log()

 flatNodeHeirarchy = {
  let root = {children: data_as_json()};
  return d3.hierarchy(root).sum(d => d.hh_size);
}

packedData = {
  let width = 930;
  let height = 930;
  let pack = d3.pack()
      .size([width, height])
      .padding(3)
  return pack(flatNodeHeirarchy);
}


let width = 932;
  let height = 932;
  const svgHTML = html`<svg width="${width}" height="${height}"></svg>`;

  const svg = d3.select(svgHTML)
      .style("width", "100%")
      .style("height", "auto")
      .attr("font-size", 10)
      .attr("font-family", "sans-serif")
      .attr("text-anchor", "middle");

      const leaf = svg.selectAll("g")
        .data(packedData.leaves())
        .enter().append("g")
          .attr("transform", d => `translate(${d.x + 1},${d.y + 1})`);


      const circle = leaf.append("circle")
        .attr("r", d => d.r)
        .attr("fill", d => "#bbccff");

        </script>
    </body>
    </html>
